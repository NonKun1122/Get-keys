<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏£‡∏±‡∏ö Key ‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 1 Key</title>
<style>
body { font-family: Arial; display:flex; justify-content:center; align-items:center; height:100vh; background:#f0f0f0;}
.container { text-align:center; background:#fff; padding:30px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.2);}
button { padding:8px 15px; font-size:14px; border:none; border-radius:8px; margin:0 5px; cursor:pointer;}
.copyBtn { background:#4CAF50; color:white; }
.generateBtn { background:#2196F3; color:white; }
p { margin-top:15px; font-weight:bold; word-break:break-all; }
</style>
</head>
<body>
<div class="container">
  <h1>üîë ‡∏£‡∏±‡∏ö Key ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h1>
  <p id="keyDisplay">‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á Key</p>
  <p id="expireDisplay"></p>
  <button class="copyBtn" id="copyBtn">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å Key</button>
  <button class="generateBtn" id="generateBtn">‡∏™‡∏£‡πâ‡∏≤‡∏á Key ‡πÉ‡∏´‡∏°‡πà</button>
</div>

<script>
let keyData = JSON.parse(localStorage.getItem("activeKey") || "{}");
let lastGenerate = parseInt(localStorage.getItem("lastGenerate") || 0);

function isToday(timestamp){
  if(!timestamp) return false;
  const last = new Date(timestamp);
  const today = new Date();
  return last.getFullYear() === today.getFullYear() &&
         last.getMonth() === today.getMonth() &&
         last.getDate() === today.getDate();
}

function generateKey(length=24){
  const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
  let key = "";
  for(let i=0;i<length;i++) key += chars.charAt(Math.floor(Math.random()*chars.length));
  return key.match(/.{1,4}/g).join("-");
}

function showKey(){
  if(keyData.key){
    document.getElementById("keyDisplay").textContent = keyData.key;
    document.getElementById("expireDisplay").textContent = "‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏: " + new Date(keyData.expire).toLocaleString();
  } else {
    document.getElementById("keyDisplay").textContent = "‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á Key";
    document.getElementById("expireDisplay").textContent = "";
  }
}

showKey();

document.getElementById("generateBtn").addEventListener("click", ()=>{
  const now = Date.now();
  if(isToday(lastGenerate)){
    alert("‚ö†Ô∏è ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏£‡πâ‡∏≤‡∏á Key ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏≠‡∏ß‡∏±‡∏ô‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ");
    return;
  }

  const newKey = generateKey();
  const expire = now + 24*60*60*1000; // 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
  keyData = { key:newKey, expire:expire };
  localStorage.setItem("activeKey", JSON.stringify(keyData));
  localStorage.setItem("lastGenerate", now.toString());
  lastGenerate = now;

  showKey();
});

document.getElementById("copyBtn").addEventListener("click", ()=>{
  if(keyData.key){
    navigator.clipboard.writeText(keyData.key).then(()=> alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å Key ‡πÅ‡∏•‡πâ‡∏ß!"));
  }
});
</script>
</body>
</html>
