<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Get Key</title>
</head>
<body>
  <h1>ðŸ”‘ à¸ªà¸£à¹‰à¸²à¸‡ Key</h1>
  <p id="userInfo"></p>
  <button id="createBtn">à¸ªà¸£à¹‰à¸²à¸‡ Key</button>
  <p id="result"></p>

<script>
const urlParams = new URLSearchParams(window.location.search);
const userId = urlParams.get("userId");

if(userId){
  document.getElementById("userInfo").textContent = "Roblox UserId: " + userId;
}else{
  document.getElementById("userInfo").textContent = "âŒ à¹„à¸¡à¹ˆà¸žà¸š UserId";
}

// à¸›à¸¸à¹ˆà¸¡à¸ªà¸£à¹‰à¸²à¸‡ Key
document.getElementById("createBtn").onclick = async () => {
  if(!userId) return alert("UserId à¸«à¸²à¸¢");

  const res = await fetch(`/api/getKey?userId=${userId}`);
  const data = await res.json();
  document.getElementById("result").textContent =
    `Key à¸‚à¸­à¸‡à¸„à¸¸à¸“: ${data.key} (à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸: ${new Date(data.expire).toLocaleString()})`;
};
</script>
</body>
</html>
